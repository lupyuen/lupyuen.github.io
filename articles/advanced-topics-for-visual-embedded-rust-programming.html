<!doctype html>
<html lang="en">

<head>
  <link rel="stylesheet" type="text/css" href="/_static/css/banner-styles.css?v=bsmaklHF" />
  <link rel="stylesheet" type="text/css" href="/_static/css/iconochive.css?v=qtvMKcIJ" />
  <!-- End Wayback Rewrite JS Include -->
  <title data-rh="true">Advanced Topics for Visual Embedded Rust Programming</title>
  <meta data-rh="true" charset="utf-8" />
  <meta data-rh="true" name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1" />
  <meta data-rh="true" name="theme-color" content="#000000" />
  <meta data-rh="true" property="og:type" content="article" />
  <meta data-rh="true" property="article:published_time" content="2019-08-30T04:01:09.495Z" />
  <meta data-rh="true" name="title" content="Advanced Topics for Visual Embedded Rust Programming" />
  <meta data-rh="true" property="og:title" content="Advanced Topics for Visual Embedded Rust Programming" />
  <meta data-rh="true" property="twitter:title" content="Advanced Topics for Visual Embedded Rust Programming" />
  <meta data-rh="true" name="description"
    content="Watch what happens behind the scenes when you create a Visual Embedded Rust program" />
  <meta data-rh="true" property="og:description"
    content="Watch what happens behind the scenes when you create a Visual Embedded Rust program" />
  <meta data-rh="true" property="twitter:description"
    content="Watch what happens behind the scenes when you create a Visual Embedded Rust program" />
  <meta data-rh="true" name="twitter:card" content="summary_large_image" />
  <meta data-rh="true" name="twitter:creator" content="@MisterTechBlog" />
  <meta data-rh="true" name="author" content="Lup Yuen Lee 李立源" />
  <meta data-rh="true" name="robots" content="index,follow" />
  <meta data-rh="true" name="referrer" content="unsafe-url" />
  <meta data-rh="true" name="twitter:label1" value="Reading time" />
  <meta data-rh="true" name="twitter:data1" value="9 min read" />
  <meta data-rh="true" name="parsely-post-id" content="ebf1627fe397" />

<!-- Begin scripts/rustdoc-header.html: Header for Custom Markdown files processed by rustdoc, like chip8.md -->
<link rel="alternate" type="application/rss+xml" title="RSS Feed for lupyuen" href="/rss.xml" />
<link rel="stylesheet" type="text/css" href="../normalize.css">
<link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle">
<link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle">
<link rel="stylesheet" type="text/css" href="../prism.css">
<script src="../storage.js"></script><noscript>
<link rel="stylesheet" href="../noscript.css"></noscript>
<link rel="shortcut icon" href="../favicon.ico">
<style type="text/css">
    #crate-search {
        background-image: url("../down-arrow.svg");
    }
    a {
        color: #77d;
    }
</style>
<!-- End scripts/rustdoc-header.html -->

</head>

<body>
  <div id="root">
    <div class="a b c">
      <article>
        <section class="cj ck cl cm ak cn ce n co"></section><span class="r"></span>
        <div>
          <div class="cp u cq cr cs ct"></div>
          <section class="cu cv cw cx cy">
            <div class="cz ak">
              <figure class="da cz ak paragraph-image">

                
                <p><img src="https://lupyuen.github.io/images/legacy/w1.png" /></p>


                <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">IoT sensor device with STM32 Blue Pill
                  microcontroller, Quectel BC95-G global NB-IoT module and 18650 lithium ion battery</figcaption>
              </figure>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <div>
                  <div id="7c24" class="ea eb ec bk ed b ee ef eg eh ei ej ek">
                    <h1 class="ed b ee el ec">Advanced Topics for Visual Embedded Rust Programming</h1>
                  </div>
                  <div class="em">
                    <div class="n en eo ep eq">
                      <div class="o n">
                        <div><a rel="noopener"
                            href="">
                            <div class="dd er es">
                              <div class="bs n et o p cp eu ev ew ex ey ct"></div><img alt="Lup Yuen Lee 李立源" class="r ez es er"
                                src="https://web.archive.org/web/20191204194312im_/https://miro.medium.com/fit/c/96/96/1*KGohS3sQaUnr58gc0BIfoQ.jpeg"
                                width="48" height="48" />
                            </div>
                          </a></div>
                        <div class="fa ak r">
                          <div class="n">
                            <div style="flex:1"><span class="bj b bk bl bm bn r ec q">
                                <div class="fb n o fc"><span class="bj dy ds bl di fd fe ff fg fh ec"><a
                                      class="at au av aw ax ay az ba bb bc fi bf bg bh bi" rel="noopener"
                                      href="">Lup
                                      Yuen Lee 李立源</a></span>
                                  <div class="fj r ar h">
                                  </div>
                                </div>
                              </span></div>
                          </div><span class="bj b bk bl bm bn r bo bp"><span class="bj dy ds bl di fd fe ff fg fh bo">
                              <div><a class="at au av aw ax ay az ba bb bc fi bf bg bh bi" rel="noopener"
                                  href="">Aug
                                  17</a> <!-- -->·
                                <!-- -->
                                <!-- -->9
                                <!-- --> min read
                              </div>
                            </span></span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <p id="8934" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><em class="gv">Watch what happens
                    behind the scenes when you create a Visual Embedded Rust program</em></p>
                <p id="ddb7" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">This is the companion article
                  that explains the internals of the <a class="at cg gw gx gy gz" target="_blank" rel="noopener"
                    href="visual-embedded-rust-programming-with-visual-studio-code">Visual
                    Embedded Rust extension for Visual Studio Code</a> that I have covered here…</p>
                <div class="ha hb hc hd he hf"><a rel="noopener"
                    href="visual-embedded-rust-programming-with-visual-studio-code">
                    <section class="hi cl cm ak ce n ar hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx">
                      <div class="hy n co p hz ia">
                        <h2 class="bj ib ic bl ec">
                          <div class="di hg fe ff hh fh">Visual Embedded Rust Programming with Visual Studio Code</div>
                        </h2>
                      </div>
                      <div class="if r">
                        <div class="ig r ih ii ij if ik il im"></div>
                      </div>
                    </section>
                  </a></div>
              </div>
            </div>
          </section>
          <hr class="in dy io ip iq dv ir is it iu iv" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <h1 id="cf6a" class="iw ix ec bk bj ib iy iz ja jb jc jd je jf jg jh ji">Why Blue Pill? Power vs Price
                  Compromise</h1>
                <figure class="jk jl jm jn jo cz dr jp cd jq jr js jt ju ba jv jw jx jy jz ka paragraph-image">
                
                  <p><img src="https://lupyuen.github.io/images/legacy/w2.png" /></p>

                  <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">ST Microelectronics STM32F103C8T6
                    microcontroller on Blue Pill (And my soldering has greatly improved)</figcaption>
                </figure>
                <p id="3503" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Blue Pill was chosen for the
                  tutorial because it best represents a real-world, low-cost microcontroller with limited RAM and ROM.
                </p>
                <p id="25ae" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The microcontroller is found in
                  many off-the-shelf products, even <a
                    href="https://timakro.de/blog/bare-metal-stm32-programming/"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">flying drones</a>!</p>
                <p id="3a0b" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">To be clear what’s a “Blue Pill”…
                  The heart of Blue Pill is an STMicroelectronics <strong class="gj kc">STM32F103C8T6
                  </strong>microcontroller.</p>
                <p id="5e28" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">That’s a tiny module
                  surface-mounted on a Blue printed-circuit board (hence the name Blue Pill). Without the Blue (and
                  Yellow) parts, it would be extremely difficult for us to experiment with the microcontroller. So we
                  buy a Blue Pill and use it like an Arduino.</p>
                <p id="fe17" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Thus Blue Pill is clearly a
                  Developer Kit that marks up the cost of the microcontroller. Blue Pill retails for $2, but the
                  STM32F103C8T6 microcontroller<strong class="gj kc"> </strong><a
                    href="https://s.taobao.com/search?ie=utf8&amp;initiative_id=staobaoz_20190817&amp;stats_click=search_radio_all%3A1&amp;js=1&amp;imgfile=&amp;q=stm32f103c8t6%E8%8A%AF%E7%89%87&amp;suggest=0_1&amp;_input_charset=utf-8&amp;wq=STM32F103C8T6&amp;suggest_query=STM32F103C8T6&amp;source=suggest"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow"><strong class="gj kc">sells for
                      only 40 cents</strong></a>! <em class="gv">Perfect for creating millions and millions of IoT
                    sensors!</em></p>
                <p id="5421" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><em class="gv">(Actually a $2 dev
                    kit is so affordable that it begs you to go ahead and do </em><a
                    href="https://www.linkedin.com/posts/lupyuen_nbiot-stm32-quectel-activity-6562722168394878976-0ld5"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow"><em class="gv">many</em></a><em
                    class="gv"> </em><a
                    href="https://www.linkedin.com/posts/lupyuen_stm32-quectel-nbiot-activity-6558570814986387456-ajVF"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow"><em class="gv">many</em></a><em
                    class="gv"> crazy things with it!)</em></p>
                <p id="29c3" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">At this price we get a 32-bit Arm
                  processor with many goodies (GPIO, UART, I2C, SPI, USB, …) But the catch: It has only <strong
                    class="gj kc">64 KB of ROM and 20 KB of RAM</strong>. <em class="gv">(</em><a
                    href="https://en.wikipedia.org/wiki/Apple_II_Plus"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow"><em class="gv">Similar to the
                      Apple II</em></a><em class="gv">!)</em></p>
                <p id="50e0" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">With Blue Pill’s extremely
                  limited RAM and ROM, we can’t code in decent programming languages like MicroPython and JavaScript
                  (for MakeCode, which I tried and failed).</p>
                <p id="06c7" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">C was the only option… Until Rust
                  came along! Rust is a systems programming language that’s as low level as C (i.e. no garbage
                  collection). Yet it solves the painful pointer problem in C. <a
                    href="https://mssun.me/assets/ares19securing.pdf"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">This research paper presents an
                    excellent comparison of C with Rust</a>.</p>
                <p id="b26f" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><a class="at cg gw gx gy gz"
                    target="_blank" rel="noopener"
                    href="/web/20191204194312/https://medium.com/swlh/super-blue-pill-like-stm32-blue-pill-but-better-6d341d9347da">Read
                    more about Blue Pill and the upgraded version, Super Blue Pill</a></p>
              </div>
            </div>
          </section>
          <hr class="in dy io ip iq dv ir is it iu iv" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <h1 id="30eb" class="iw ix ec bk bj ib iy iz ja jb jc jd je jf jg jh ji">How Small Is Rust?</h1>
                <p id="430e" class="gh gi ec bk gj b gk kd gm ke go kf gq kg gs kh gu">Here’s the RAM and ROM usage of
                  the Visual Embedded Rust firmware on Blue Pill. The left section shows Rust and Apache Mynewt
                  functions sorted by size (largest on top). The right section shows the total RAM and ROM used by each
                  library.</p>
                <p id="09a3" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Our firmware occupies 55 KB of
                  ROM and 13 KB of RAM, out of Blue Pill’s 64 KB ROM and 20 KB RAM. (That’s<strong class="gj kc"> 86% of
                    ROM</strong> and <strong class="gj kc">65% of RAM</strong> used)</p>
                <p id="3923" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><a
                    href="https://docs.google.com/spreadsheets/d/1zIDfQmRcQ_wxGIPsq7MOxk7XzBO5-TL9R25TSFxaopU/edit#gid=381366828&amp;fvid=1643056349"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">The spreadsheet below</a> was
                  generated based on the <a
                    href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/logs/my_sensor_app.elf.map"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">Linker Memory Map</a> created
                  during the firmware build. <a class="at cg gw gx gy gz" target="_blank" rel="noopener"
                    href="/web/20191204194312/https://medium.com/@ly.lee/stm32-blue-pill-analyse-and-optimise-your-ram-and-rom-9fc805e16ed7">Read
                    more about memory maps</a></p>
              </div>
            </div>
            <div class="cz ak">
              <figure class="jk jl jm jn jo cz ak paragraph-image">
                
                <p><img src="https://lupyuen.github.io/images/legacy/w3.png" /></p>


                <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">RAM and ROM usage of the Visual Embedded Rust
                  firmware</figcaption>
              </figure>
            </div>
          </section>
          <hr class="in dy io ip iq dv ir is it iu iv" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <h1 id="3ad9" class="iw ix ec bk bj ib iy iz ja jb jc jd je jf jg jh ji">Why Apache Mynewt? Evolution of
                  Rust on Bare Metal</h1>
                <p id="05da" class="gh gi ec bk gj b gk kd gm ke go kf gq kg gs kh gu">Why are we running the Apache
                  Mynewt realtime operating system on Blue Pill together with Rust? Mynewt was built with C (and
                  therefore susceptible to C defects)… <em class="gv">Why not run Rust on Blue Pill without C?</em></p>
                <p id="bbe4" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">This means we would be running
                  Rust on “<strong class="gj kc">Bare Metal</strong>”, without any other operating system. In fact, Rust
                  becomes the operating system. Rust would have to handle GPIO, UART, I2C, SPI, USB, … Plus multitasking
                  and related functions like semaphores and messages queues.</p>
                <p id="bada" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Why reinvent the Rusty wheel when
                  we already have realtime operating systems like Mynewt, FreeRTOS, Zephyr, …? It takes a lot of effort
                  to build a new realtime operating system in Rust that supports all kinds of microcontrollers.</p>
                <p id="eacd" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">There’s a great team hard at work
                  creating the <a
                    href="https://rust-embedded.github.io/book/intro/index.html"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">Embedded Rust platform</a>. In the
                  meantime, I’m taking a shortcut and using Mynewt… But in a safe way, with <strong class="gj kc">Safe
                    Wrappers</strong>.</p>
                <p id="0ed3" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">I’m not solving the problem of
                  devices crashing due to bugs in the operating system… Because I trust experienced C coders in the
                  Mynewt community for creating high-quality kernel code. Instead I’m solving the problem of devices
                  crashing due to bugs in the C application code… And experienced C application coders are really hard
                  to find.</p>
                <p id="5137" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Can we solve this problem with
                  Rust?</p>
              </div>
            </div>
          </section>
          <hr class="in dy io ip iq dv ir is it iu iv" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <h1 id="cf23" class="iw ix ec bk bj ib iy iz ja jb jc jd je jf jg jh ji">How Safe Is Rust? Safe Wrappers
                  for Mynewt</h1>
                <p id="fa0d" class="gh gi ec bk gj b gk kd gm ke go kf gq kg gs kh gu">Rust won’t let us use pointers
                  freely like in C (unless we explicitly write <code class="dm kj kk kl km b">unsafe</code> code).
                  Mynewt however is written in C and it will blindly accept any pointer we pass, even bad ones. How
                  shall we reconcile the two?</p>
                <p id="b55b" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The solution: Create <strong
                    class="gj kc">Safe Wrappers</strong> that validate all pointers passed from Rust to Mynewt and vice
                  versa. A Safe Wrapper is a Rust function that wraps around the Mynewt API, converting the unsafe
                  Mynewt API into a safe Rust API.</p>
                <p id="d894" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">For example: When a Mynewt API
                  accepts a string input (<code class="dm kj kk kl km b">const char *</code>), we wrap the API with a
                  Rust function that accepts a <code class="dm kj kk kl km b">Strn</code> type instead.</p>
                <p id="83d7" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><code
                    class="dm kj kk kl km b">Strn</code> is a type I created that represents a null-terminated string.
                  Unlike C, Rust strings are not expected to be terminated by the null byte. So when we pass strings to
                  the Safe Wrapper as <code class="dm kj kk kl km b">Strn</code>, the wrapper verifies that the string
                  is indeed terminated by a null.</p>
                <p id="dbbb" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">When Mynewt returns a string, the
                  Safe Wrapper also uses the <code class="dm kj kk kl km b">Strn</code> type to verify that the returned
                  string is properly terminated by null.</p>
                <p id="5027" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Read more about Mynewt Safe
                  Wrappers in the section <em class="gv">“</em><a class="at cg gw gx gy gz" target="_blank"
                    rel="noopener"
                    href="/web/20191204194312/https://medium.com/@ly.lee/rust-rocks-nb-iot-stm32-blue-pill-with-quectel-bc95-g-on-apache-mynewt-ef62a7e28f7e"><em
                      class="gv">Advanced Topic: Safe Wrappers for Mynewt</em></a><em class="gv">”</em></p>
                <p id="8b9b" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><a
                    href="https://mssun.me/assets/ares19securing.pdf"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">Read this excellent paper that
                    compares Unsafe Coding in C with Safe Coding in Rust</a></p>
              </div>
            </div>
          </section>
          <hr class="in dy io ip iq dv ir is it iu iv" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <h1 id="5b47" class="iw ix ec bk bj ib iy iz ja jb jc jd je jf jg jh ji">What’s Wrong With Rust? Types!
                </h1>
                <p id="ecb7" class="gh gi ec bk gj b gk kd gm ke go kf gq kg gs kh gu">In C we would manipulate a string
                  as <code class="dm kj kk kl km b">char *</code>. In Rust it weirdly becomes <code
                    class="dm kj kk kl km b">&amp;&#x27;static Strn</code>… a reference to a static null-terminated
                  string. (<code class="dm kj kk kl km b">Strn</code> is my own helper type for embedded platforms.) Yes
                  Rust is 100% precise in describing types… perhaps too precise?</p>
                <p id="dbe5" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Many Rust learners struggle with
                  Rust Types <em class="gv">(I’m still struggling)</em>. The Rust Compiler helpfully suggests how to fix
                  coding issues with types. If the Rust Compiler is really so smart, why not go all the way and <strong
                    class="gj kc">fix the types for us</strong>?</p>
                <p id="3268" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Thus Visual Embedded Rust becomes
                  an experiment in “<strong class="gj kc">Typeless Rust</strong>”. Visual Coding doesn’t give us much
                  room to express precise types in our Visual Programs. (How would you visually represent a <em
                    class="gv">reference to a static null-terminated string</em>?) And if Visual Rust is meant for
                  beginners, maybe we shouldn’t even mention types, to flatten the Rust learning curve.</p>
                <p id="095f" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Rust Learners shall stroll up the
                  Rust learning slope starting with…</p>
                <p id="53cf" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">1️⃣ <strong class="gj kc">Visual
                    Rust</strong>, devoid of types, followed by…</p>
                <p id="3b17" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">2️⃣ <strong
                    class="gj kc">Typeless Rust</strong>, the typeless code generated by Visual Rust, and finally…</p>
                <p id="84f1" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">3️⃣ <strong
                    class="gj kc">Fully-Typed Rust</strong>, a.k.a. Rust 2018</p>
                <p id="0ddc" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">More about Typeless Rust in a
                  while…</p>
              </div>
            </div>
          </section>
          <hr class="in dy io ip iq dv ir is it iu iv" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <h1 id="4158" class="iw ix ec bk bj ib iy iz ja jb jc jd je jf jg jh ji">Typeless Rust</h1>
                <p id="d8eb" class="gh gi ec bk gj b gk kd gm ke go kf gq kg gs kh gu">To making coding easier for
                  beginners, the Visual Embedded Rust extension generates <a
                    href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/visual/src/lib.rs"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">Typeless Rust code that looks like
                    this</a>…</p>
                <pre
                  class="jk jl jm jn jo kn ko kp"><span id="9d0f" class="kq ix ec bk km b ds kr ks r kt">#[infer_type]  //  Infer the missing types<br/>fn start_sensor_listener(<br/>    sensor_name: _, sensor_key: _, sensor_type: _, poll_time: _) ...<br/>    //  Call Mynewt API<br/>    sensor::set_poll_rate_ms(sensor_name, poll_time) ? ;</span></pre>
                <p id="d2f1" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">When the typeless code is
                  compiled, the <code
                    class="dm kj kk kl km b"><a href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/macros/src/infer_type.rs" class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">infer_type</a></code><a
                    href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/macros/src/infer_type.rs"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow"> Procedural Macro</a> infers the
                  types by matching the variables against the Mynewt API...</p>
                <pre
                  class="jk jl jm jn jo kn ko kp"><span id="da0c" class="kq ix ec bk km b ds kr ks r kt">//  Call Mynewt API<br/>sensor::set_poll_rate_ms(sensor_name, poll_time) ? ;  <br/>//  `sensor_name` inferred as type `&amp;Strn`<br/>//  `poll_time`   inferred as type `u32`</span></pre>
                <p id="b469" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The macro then injects the
                  inferred types into the typeless code…</p>
                <pre
                  class="jk jl jm jn jo kn ko kp"><span id="f07d" class="kq ix ec bk km b ds kr ks r kt">fn start_sensor_listener(<br/>    sensor_name: &amp;Strn, sensor_key: &amp;&#x27;static Strn,<br/>    sensor_type: sensor_type_t, poll_time: u32) ...</span></pre>
                <p id="d0c4" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The inferred types are stored in
                  <code
                    class="dm kj kk kl km b"><a href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/infer.json" class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">infer.json</a></code>.
                  The enables the <code class="dm kj kk kl km b">infer_type</code> macro to infer types based on types
                  already inferred for other functions...</p>
                <pre
                  class="jk jl jm jn jo kn ko kp"><span id="1d70" class="kq ix ec bk km b ds kr ks r kt">&quot;start_sensor_listener&quot;: [<br/>    [ &quot;sensor_name&quot;, &quot;&amp;Strn&quot; ],<br/>    [ &quot;sensor_key&quot;,  &quot;&amp;&#x27;static Strn&quot; ],<br/>    [ &quot;sensor_type&quot;, &quot;sensor_type_t&quot; ],<br/>    [ &quot;poll_time&quot;,   &quot;u32&quot; ]<br/>],<br/>&quot;send_sensor_data&quot;: [<br/>    [ &quot;sensor_data&quot;, &quot;&amp;SensorValue&quot; ]<br/>],<br/>&quot;handle_sensor_data&quot;: [<br/>    [ &quot;sensor_data&quot;, &quot;&amp;SensorValue&quot; ]<br/>]<!-- --> </span></pre>
                <p id="3716" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">This diagram illustrates the Type
                  Inference…</p>
              </div>
            </div>
            <div class="cz ak">
              <figure class="jk jl jm jn jo cz ak paragraph-image">
                
                <p><img src="https://lupyuen.github.io/images/legacy/w4.png" /></p>


                <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">How the infer_type macro infers missing types
                </figcaption>
              </figure>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <p id="d1ca" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Here’s an animation (done with
                  Visual Studio Code) that explains how the types were inferred by the <code
                    class="dm kj kk kl km b">infer_type</code> macro. At top left are the types to be inferred. At
                  bottom left are the known type signatures from the Mynewt API.</p>
                <p id="dd9b" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The <code
                    class="dm kj kk kl km b">infer_type</code> macro scans the Typeless Rust program recursively, hence
                  we see the roving red highlight. When the macro finds a match with the Mynewt API, the code flashes
                  green.</p>
                <p id="284c" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Green ticks at the top left mean
                  that we have successfully inferred the types.</p>
                <p id="1ceb" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The recursive Rust code parsing
                  was implemented with the excellent <code
                    class="dm kj kk kl km b"><a href="https://docs.rs/syn/1.0.2/syn/" class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">syn</a></code><a
                    href="https://docs.rs/syn/1.0.2/syn/"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow"> crate</a>. The <code
                    class="dm kj kk kl km b"><a href="https://docs.rs/quote/1.0.1/quote/" class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">quote</a></code><a
                    href="https://docs.rs/quote/1.0.1/quote/"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow"> crate</a> was used to emit the
                  transformed Rust code.</p>
                <p id="528c" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><a
                    href="https://weibo.com/7285313566/I2N12aA4W"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">微博视频</a></p>
              </div>
            </div>
            <div class="cz ak">
              <figure class="jk jl jm jn jo cz">
                <div class="dl r dd">
                  <div class="kv r"><iframe
                      src="https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2F1SCLlwK5KwE%3Ffeature%3Doembed&amp;url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D1SCLlwK5KwE&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2F1SCLlwK5KwE%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtube"
                      allowfullscreen="" frameborder="0" height="480" width="854"
                      title="Animation of Rust Type Inference" class="cp t u dh ak" scrolling="auto"></iframe></div>
                </div>
                <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">How the infer_type macro infers missing types,
                  animated in Visual Studio Code with the Visual Embedded Rust Extension</figcaption>
              </figure>
            </div>
          </section>
          <hr class="in dy io ip iq dv ir is it iu iv" />
          <section class="cu cv cw cx cy">
            <div class="cz ak">
              <figure class="jk jl jm jn jo cz ak paragraph-image">
                
                <p><img src="https://lupyuen.github.io/images/legacy/w5.gif" /></p>


                <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Visual Embedded Rust Extension for Visual Studio
                  Code</figcaption>
              </figure>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <h1 id="f3b4" class="iw ix ec bk bj ib iy kx ja ky jc kz je la jg lb ji">Inside The Visual Embedded Rust
                  Extension for Visual Studio Code</h1>
                <p id="a2a0" class="gh gi ec bk gj b gk kd gm ke go kf gq kg gs kh gu">The source code for the Visual
                  Embedded Rust extension is located at <code
                    class="dm kj kk kl km b"><a href="https://github.com/lupyuen/visual-embedded-rust" class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">github.com/lupyuen/visual-embedded-rust</a></code>
                </p>
                <p id="2fa2" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The extension is published in the
                  <a href="https://marketplace.visualstudio.com/items?itemName=LeeLupYuen.visual-embedded-rust&amp;ssr=false#overview"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">Visual Studio Marketplace here</a>
                </p>
                <p id="a4ce" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The extension wraps the web-based
                  visual code editor from <a
                    href="https://developers.google.com/blockly/guides/overview"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">Google Blockly</a> into a <a
                    href="https://code.visualstudio.com/api/extension-guides/webview"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">VSCode WebView</a>. Blockly uses
                  XML to represent a visual program.</p>
                <p id="7aae" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The extension is activated when
                  we <a
                    href="https://github.com/lupyuen/visual-embedded-rust/blob/master/package.json#L41-L49"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">edit a Rust source file</a> (<code
                    class="dm kj kk kl km b">*.rs</code>). <a
                    href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/visual/src/lib.rs"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">Here’s a sample Rust source file
                    containing a Visual Program</a></p>
                <p id="2d18" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">There are two parts of the file…
                </p>
                <p id="8f07" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><strong class="gj kc">Rust Source
                    Code</strong>: Which is autogenerated by the Blockly Code Generator from the Blockly XML</p>
                <p id="666b" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><strong class="gj kc">Blockly
                    XML</strong>: The XML representation of the visual program. It’s located at the <a
                    href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/visual/src/lib.rs#L159"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">bottom of the source file</a>,
                  marked by <code class="dm kj kk kl km b">BEGIN BLOCKS … END BLOCKS</code></p>
              </div>
            </div>
            <div class="cz">
              <div class="n p">
                <div class="lc ld le lf lg lh ag li ah lj aj ak">
                  <figure class="jk jl jm jn jo cz ll lm paragraph-image">
                
                    <p><img src="https://lupyuen.github.io/images/legacy/w6.jpeg" /></p>


                    <figcaption class="bo ds dt du dv cn cl cm dw dx bj dy">Logic Flow in the Visual Embedded Rust
                      Extension</figcaption>
                  </figure>
                </div>
              </div>
            </div>
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <p id="d3e6" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">1️⃣ Main logic for the VSCode
                  Extension is in <code
                    class="dm kj kk kl km b"><a href="https://github.com/lupyuen/visual-embedded-rust/blob/master/src/extension.ts" class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">extension.ts</a></code>
                </p>
                <p id="ccfe" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The extension contains two asset
                  folders:</p>
                <p id="4092" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><code
                    class="dm kj kk kl km b"><a href="https://github.com/lupyuen/visual-embedded-rust/tree/master/resources" class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">resources</a></code>:
                  Contains a <a
                    href="https://github.com/lupyuen/visual-embedded-rust/blob/master/resources/template.rs"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">visual program template</a> that
                  will be used to populate empty Rust source files</p>
                <p id="bcd5" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><code
                    class="dm kj kk kl km b"><a href="https://github.com/lupyuen/visual-embedded-rust/tree/master/media" class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">media</a></code>:
                  Contains the Blockly JavaScript code that will be embedded in the WebView to render the visual editor
                  and generate Rust source code…</p>
                <ul class="">
                  <li id="83c3" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu lo lp lq"><code
                      class="dm kj kk kl km b"><a href="https://github.com/lupyuen/blockly-mynewt-rust" class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">blockly-mynewt-rust</a></code>
                    contains the Blockly JavaScript code with a custom Rust Code Generator</li>
                  <li id="0f05" class="gh gi ec bk gj b gk lr gm ls go lt gq lu gs lv gu lo lp lq"><code
                      class="dm kj kk kl km b"><a href="https://github.com/google/closure-library" class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">closure-library</a></code>
                    is the Google Closure Library needed by Blockly</li>
                  <li id="0de2" class="gh gi ec bk gj b gk lr gm ls go lt gq lu gs lv gu lo lp lq"><code
                      class="dm kj kk kl km b"><a href="https://github.com/lupyuen/visual-embedded-rust/tree/master/media/vscode" class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">vscode</a></code>
                    contains JavaScript code that enables VSCode Message Passing in the WebView to implement save/load
                    functions and modal prompts</li>
                </ul>
                <p id="3366" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">2️⃣ The extension creates a <a
                    href="https://github.com/lupyuen/visual-embedded-rust/blob/master/src/extension.ts#L88-L144"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">WebView that embeds the HTML and
                    JavaScript code</a> from <a
                    href="https://developers.google.com/blockly/guides/overview"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">Google Blockly</a>.</p>
                <p id="20b7" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><a
                    href="https://github.com/lupyuen/visual-embedded-rust/blob/master/src/web.ts"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">HTML code for the WebView is
                    here</a></p>
                <p id="3953" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">3️⃣ The VSCode Extension and the
                  WebView are running in <a
                    href="https://code.visualstudio.com/api/extension-guides/webview#scripts-and-message-passing"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">separate JavaScript sandboxes</a>.
                </p>
                <p id="de00" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">Hence we’ll be using VSCode
                  Message Passing to communicate between the VSCode Extension and WebView, as we shall soon see…</p>
                <p id="3649" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">4️⃣ <a
                    href="https://github.com/lupyuen/visual-embedded-rust/blob/master/media/vscode/storage.js#L59-L71"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">When the WebView loads</a>, it
                  notifies the VSCode Extension to fetch the contents of the Rust source file.</p>
                <p id="7208" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The VSCode Extension responds by
                  <a href="https://github.com/lupyuen/visual-embedded-rust/blob/master/src/extension.ts#L168-L186"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">passing the contents of the active
                    Rust source file to the WebView</a> via Message Passing.</p>
                <p id="5ce9" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The WebView <a
                    href="https://github.com/lupyuen/visual-embedded-rust/blob/master/media/vscode/message.js#L40-L60"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">extracts the Blockly XML</a>
                  embedded in the file contents (<a
                    href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/rust/visual/src/lib.rs#L159"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">at the bottom</a>). The WebView
                  refreshes the Blockly workspace with the Blockly XML.</p>
                <p id="2562" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">If the active Rust source file is
                  empty, the VSCode Extension <a
                    href="https://github.com/lupyuen/visual-embedded-rust/blob/master/src/extension.ts#L155-L202"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">populates the file</a> with a <a
                    href="https://github.com/lupyuen/visual-embedded-rust/blob/master/resources/template.rs"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">template containing Blockly
                    XML</a></p>
                <p id="0483" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">5️⃣ When the <a
                    href="https://github.com/lupyuen/visual-embedded-rust/blob/master/media/vscode/storage.js#L194-L207"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">visual program is updated</a>, the
                  WebView sends the <a
                    href="https://github.com/lupyuen/visual-embedded-rust/blob/master/media/vscode/message.js#L79-L89"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">updated Blockly XML and the
                    generated Rust code</a> (via <a
                    href="https://github.com/lupyuen/visual-embedded-rust/blob/master/media/vscode/storage.js#L187-L192"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">Message Passing</a>) to the VSCode
                  Extension.</p>
                <p id="fc58" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The extension <a
                    href="https://github.com/lupyuen/visual-embedded-rust/blob/master/src/extension.ts#L203-L223"
                    class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">updates the Rust document</a> in
                  VSCode with the Blockly XML and generated Rust Code.</p>
                <p id="150c" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">6️⃣ The custom-built Rust Code
                  Generator for Blockly is here…</p>
                <p id="0ac0" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><code
                    class="dm kj kk kl km b"><a href="https://github.com/lupyuen/blockly-mynewt-rust/blob/master/generators/rust.js" class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">github.com/lupyuen/blockly-mynewt-rust/blob/master/generators/rust.js</a></code>
                </p>
                <p id="5a66" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu"><code
                    class="dm kj kk kl km b"><a href="https://github.com/lupyuen/blockly-mynewt-rust/tree/master/generators/rust" class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">github.com/lupyuen/blockly-mynewt-rust/tree/master/generators/rust</a></code>
                </p>
                <p id="e146" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">The Rust Code Generator for
                  Blockly is <a class="at cg gw gx gy gz" target="_blank" rel="noopener"
                    href="/web/20191204194312/https://medium.com/@ly.lee/visual-programming-with-embedded-rust-yes-we-can-with-apache-mynewt-and-google-blockly-8b67ef7412d7">explained
                    in this article</a></p>
              </div>
            </div>
          </section>
          <hr class="in dy io ip iq dv ir is it iu iv" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <h1 id="6899" class="iw ix ec bk bj ib iy iz ja jb jc jd je jf jg jh ji">Building The Visual Embedded
                  Rust Extension</h1>
                <p id="efb6" class="gh gi ec bk gj b gk kd gm ke go kf gq kg gs kh gu">To build the extension, two
                  repositories need to be cloned into the <code class="dm kj kk kl km b">media</code> folder: <code
                    class="dm kj kk kl km b"><a href="https://github.com/lupyuen/blockly-mynewt-rust" class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">blockly-mynewt-rust</a></code>
                  and <code
                    class="dm kj kk kl km b"><a href="https://github.com/google/closure-library" class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">closure-library</a></code>:
                </p>
                <pre
                  class="jk jl jm jn jo kn ko kp"><span id="189b" class="kq ix ec bk km b ds kr ks r kt">cd media<br/>git clone https://github.com/lupyuen/blockly-mynewt-rust<br/>git clone https://github.com/google/closure-library</span></pre>
              </div>
            </div>
          </section>
          <hr class="in dy io ip iq dv ir is it iu iv" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <h1 id="7815" class="iw ix ec bk bj ib iy iz ja jb jc jd je jf jg jh ji">The End…?</h1>
                <p id="81a7" class="gh gi ec bk gj b gk kd gm ke go kf gq kg gs kh gu">To make Visual Embedded Rust
                  complete, we need…</p>
                <ol class="">
                  <li id="24f1" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu lw lp lq">More features for the
                    <a href="https://github.com/lupyuen/blockly-mynewt-rust/tree/master/generators/rust"
                      class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">Rust Code Generator</a> in
                    Blockly</li>
                  <li id="e9e3" class="gh gi ec bk gj b gk lr gm ls go lt gq lu gs lv gu lw lp lq">Smarter Type
                    Inference for Typeless Rust</li>
                  <li id="0787" class="gh gi ec bk gj b gk lr gm ls go lt gq lu gs lv gu lw lp lq">More Mynewt functions
                    and types to be supported via Safe Wrappers</li>
                  <li id="6133" class="gh gi ec bk gj b gk lr gm ls go lt gq lu gs lv gu lw lp lq">Configuration and
                    testing on various microcontrollers</li>
                  <li id="3892" class="gh gi ec bk gj b gk lr gm ls go lt gq lu gs lv gu lw lp lq">Better usability in
                    Visual Studio Code</li>
                </ol>
                <p id="8a91" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">And yes we can make the extension
                  work for Rust programs in general!</p>
                <p id="8c79" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu">If you would like to join me in
                  making Rust simpler for beginners, drop me a note!</p>
              </div>
            </div>
          </section>
          <hr class="in dy io ip iq dv ir is it iu iv" />
          <section class="cu cv cw cx cy">
            <div class="n p">
              <div class="ac ae af ag ah dz aj ak">
                <h1 id="a37a" class="iw ix ec bk bj ib iy iz ja jb jc jd je jf jg jh ji">References</h1>
                <p id="ebcf" class="gh gi ec bk gj b gk kd gm ke go kf gq kg gs kh gu">The following files may be useful
                  for reference…</p>
                <ul class="">
                  <li id="6b03" class="gh gi ec bk gj b gk gl gm gn go gp gq gr gs gt gu lo lp lq"><a
                      href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/logs/libapp-demangle.S"
                      class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">Disassembly of the Rust
                      Application build</a></li>
                  <li id="b065" class="gh gi ec bk gj b gk lr gm ls go lt gq lu gs lv gu lo lp lq"><a
                      href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/logs/rustlib-demangle.S"
                      class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">Disassembly of the Rust
                      Crates</a></li>
                  <li id="3008" class="gh gi ec bk gj b gk lr gm ls go lt gq lu gs lv gu lo lp lq"><a
                      href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/logs/my_sensor_app.elf.lst"
                      class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">Disassembly of the entire
                      firmware</a></li>
                  <li id="d59d" class="gh gi ec bk gj b gk lr gm ls go lt gq lu gs lv gu lo lp lq"><a
                      href="https://github.com/lupyuen/stm32bluepill-mynewt-sensor/blob/rust-nbiot/logs/my_sensor_app.elf.map"
                      class="at cg gw gx gy gz" target="_blank" rel="noopener nofollow">Memory map of the firmware</a>
                  </li>
                </ul>
              </div>
            </div>
          </section>
        </div>
      </article>
    </div>
  </div>
</body>

</html>
<!--
     FILE ARCHIVED ON 19:43:12 Dec 04, 2019 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 23:18:02 Feb 22, 2021.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  load_resource: 2960.394
  RedisCDXSource: 6.404
  exclusion.robots: 0.307
  LoadShardBlock: 191.236 (3)
  PetaboxLoader3.resolve: 251.069
  exclusion.robots.policy: 0.292
  PetaboxLoader3.datanode: 2835.961 (4)
  esindex: 0.014
  captures_list: 226.91
  CDXLines.iter: 23.874 (3)
-->